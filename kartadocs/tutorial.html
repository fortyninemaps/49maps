

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Karta tutorial &mdash; karta 0.6dev documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="karta 0.6dev documentation" href="index.html"/>
        <link rel="next" title="Package reference" href="reference.html"/>
        <link rel="prev" title="Installation" href="installation.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="karta-manual.html" class="icon icon-home"> karta
          

          
          </a>

          
            
            
              <div class="version">
                0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Karta tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#definitions">Definitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#vector-data">Vector data</a></li>
<li class="toctree-l1"><a class="reference internal" href="#associated-data">Associated data</a></li>
<li class="toctree-l1"><a class="reference internal" href="#visualizing-and-importing-exporting-data">Visualizing and importing/exporting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="#raster-data">Raster data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bands">Bands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Package reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="karta-manual.html">karta</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="karta-manual.html">Docs</a> &raquo;</li>
      
    <li>Karta tutorial</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tutorial.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p><a class="reference external" href="../karta-manual.html">Back to manual</a></p>
<div class="section" id="karta-tutorial">
<h1>Karta tutorial<a class="headerlink" href="#karta-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><em>Karta</em> provides a lightweight set of tools for performing analyses of
geographical data. The organization of karta is around a set of
container classes for vector and raster data with builtin methods for
common tasks. This tutorial provides a brief introduction to some of the
main parts of karta.</p>
<p>Should you come across any mistakes, let me know, or even better,
provide a pull request on
<a class="reference external" href="https://github.com/fortyninemaps/karta">Github</a>!</p>
<p>The following examples are shown using Python 3, however <em>Karta</em> is
supported on both Python 2.7+ and Python 3.4+.</p>
</div>
<div class="section" id="definitions">
<h2>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h2>
<p><strong>Vector data</strong> are data that can be treated as a set of connected or
disconnected vertices. Examples might be road networks, a set of
borders, geophysical survey lines, or the path taken by a bottle
floating in an ocean current. In <em>Karta</em>, these data are classified as
belonging to <em>Point</em>, <em>Multipoint</em>, <em>Line</em> or <em>Polygon</em> classes. Some
questions that might be asked of vector data include</p>
<ul class="simple">
<li>which of these points are contained in this polygon?</li>
<li>how many times and where do these lines intersect each other?</li>
<li>what is the average distance travelled by a particle?</li>
<li>what municipalities does this river flow through?</li>
</ul>
<p><strong>Raster data</strong>, in contrast, is data that are typically thought of in
terms of pixels or a grid of values covering a surface. Examples might
be an elevation map, satellite image, or an upstream area map. Depending
on what the data represents, one might</p>
<ul class="simple">
<li>ask what are the slope and aspect of this DEM?</li>
<li>downsample or interpolate a grid</li>
<li>apply a pansharpening algorithm to multispectral satellite imagery</li>
<li>extract an elevation profile along a path</li>
</ul>
<p>The term <strong>coordinate reference system</strong> refers to a system of relating
measurements on a coordinate system to actual positions on Earth.
<em>Karta</em> includes methods for geodetic calculations and basic support of
projected and geographical coordinates, as well as coordinate system
classes backed by <em>pyproj</em>.</p>
</div>
</div>
<div class="section" id="vector-data">
<h1>Vector data<a class="headerlink" href="#vector-data" title="Permalink to this headline">¶</a></h1>
<p>Let&#8217;s experiment with some vector data.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">karta.vector</span> <span class="k">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Multipoint</span><span class="p">,</span> <span class="n">Line</span><span class="p">,</span> <span class="n">Polygon</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">Point</span></code>, <code class="docutils literal"><span class="pre">Multipoint</span></code>, <code class="docutils literal"><span class="pre">Line</span></code>, and <code class="docutils literal"><span class="pre">Polygon</span></code> classes can all
be instantiated by providing vertices, and optionally, associated data
and metadata.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">123.1</span><span class="p">,</span> <span class="mf">49.25</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">123.1</span><span class="p">,</span> <span class="mf">49.25</span><span class="p">))</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">mpt</span> <span class="o">=</span> <span class="n">Multipoint</span><span class="p">([(</span><span class="o">-</span><span class="mf">122.93</span><span class="p">,</span> <span class="mf">48.62</span><span class="p">),</span>
                  <span class="p">(</span><span class="o">-</span><span class="mf">123.10</span><span class="p">,</span> <span class="mf">48.54</span><span class="p">),</span>
                  <span class="p">(</span><span class="o">-</span><span class="mf">122.90</span><span class="p">,</span> <span class="mf">48.49</span><span class="p">),</span>
                  <span class="p">(</span><span class="o">-</span><span class="mf">122.81</span><span class="p">,</span> <span class="mf">48.56</span><span class="p">)])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mpt</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;class &#39;karta.vector.geometry.Multipoint&#39;([(-122.93, 48.62), (-123.1, 48.54), (-122.9, 48.49), (-122.81, 48.56)])&gt;
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">([(</span><span class="o">-</span><span class="mf">124.35713</span><span class="p">,</span> <span class="mf">49.31437</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.37857</span><span class="p">,</span> <span class="mf">49.31720</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.39442</span><span class="p">,</span> <span class="mf">49.31833</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.40311</span><span class="p">,</span> <span class="mf">49.31942</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.41052</span><span class="p">,</span> <span class="mf">49.32203</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.41681</span><span class="p">,</span> <span class="mf">49.32477</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.42278</span><span class="p">,</span> <span class="mf">49.32588</span><span class="p">)])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;class &#39;karta.vector.geometry.Line&#39;([(-124.35713, 49.31437), (-124.37857, 49.3172)...(-124.41681, 49.32477), (-124.42278, 49.32588)])&gt;
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mf">25.41</span><span class="p">,</span> <span class="mf">67.03</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">24.83</span><span class="p">,</span> <span class="mf">62.92</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">12.76</span><span class="p">,</span> <span class="mf">63.15</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">11.44</span><span class="p">,</span> <span class="mf">66.82</span><span class="p">)])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;class &#39;karta.vector.geometry.Polygon&#39;([(-25.41, 67.03), (-24.83, 62.92), (-12.76, 63.15), (-11.44, 66.82)])&gt;
</pre></div>
</div>
<p>Each geometrical object now contains a vertex/vertices in a cartesian
plane.</p>
<p>We may be interested in determining whether our point is within our
polygon</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pt</span><span class="p">))</span>       <span class="c1"># False</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">False</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="mi">65</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pt2</span><span class="p">))</span>      <span class="c1"># True</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">True</span>
</pre></div>
</div>
<p>or whether our line crosses the polygon</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">poly</span><span class="p">))</span>   <span class="c1"># False</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">False</span>
</pre></div>
</div>
<p>There are methods for computing the nearest vertex to an external point,
or the nearest point on an edge to an external point:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">60.0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">nearest_point_to</span><span class="p">(</span><span class="n">pt</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">nearest_on_boundary</span><span class="p">(</span><span class="n">pt</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">12.76</span><span class="p">,</span> <span class="mf">63.15</span><span class="p">))</span>
<span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">12.301580009598124</span><span class="p">,</span> <span class="mf">64.42454648846582</span><span class="p">))</span>
</pre></div>
</div>
<p>The vertices of multiple vertex objects can be iterated through and
sliced:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">section</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">section</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">vertex</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">-</span><span class="mf">124.39442</span><span class="p">,</span> <span class="mf">49.31833</span><span class="p">)</span>
<span class="p">(</span><span class="o">-</span><span class="mf">124.40311</span><span class="p">,</span> <span class="mf">49.31942</span><span class="p">)</span>
<span class="p">(</span><span class="o">-</span><span class="mf">124.41052</span><span class="p">,</span> <span class="mf">49.32203</span><span class="p">)</span>
</pre></div>
</div>
<p>A slice that takes part of a polygon returns a line.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">poly</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;class &#39;karta.vector.geometry.Line&#39;([(-25.41, 67.03), (-24.83, 62.92)])&gt;
</pre></div>
</div>
<p>Points have a <code class="docutils literal"><span class="pre">distance</span></code> that calculates the distance to another
point. However, if we do</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">123.1</span><span class="p">,</span> <span class="mf">49.25</span><span class="p">))</span>
<span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">70.66</span><span class="p">,</span> <span class="mf">41.52</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">pt2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mf">53.00666467530286</span>
</pre></div>
</div>
<p>this probably isn&#8217;t what we wanted. Be default, geometries in Karta use
a planar cartesian coordinate system. If our positions are meant to be
geographical coordinates, then we can provide the <code class="docutils literal"><span class="pre">crs</span></code> argument to
each geometry at creation, as in</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">karta.crs</span> <span class="k">import</span> <span class="n">LonLatWGS84</span>

<span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">123.1</span><span class="p">,</span> <span class="mf">49.25</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">LonLatWGS84</span><span class="p">)</span>
<span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">70.66</span><span class="p">,</span> <span class="mf">41.52</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">LonLatWGS84</span><span class="p">)</span>
<span class="n">pt</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">pt2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mf">4109559.5877279844</span>
</pre></div>
</div>
<p>which now gives the great circle distance between point on the Earth, in
meters.</p>
<p>When the coordinate system is specified, all geometrical methods obey
that coordinate system. We can use this to perform queries, such which
American state capitols are within 2000 km of Mexico City?</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">karta.examples</span> <span class="k">import</span> <span class="n">us_capitols</span>
<span class="n">mexico_city</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">99.13</span><span class="p">,</span> <span class="mf">19.43</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">LonLatWGS84</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># List all US state capitols</span>
<span class="k">for</span> <span class="n">capitol</span> <span class="ow">in</span> <span class="n">us_capitols</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">capitol</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">],</span> <span class="n">capitol</span><span class="o">.</span><span class="n">vertex</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Phoenix</span><span class="p">,</span> <span class="n">Arizona</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">112.1</span><span class="p">,</span> <span class="mf">33.57</span><span class="p">)</span>
<span class="n">Sacramento</span><span class="p">,</span> <span class="n">California</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">121.5</span><span class="p">,</span> <span class="mf">38.57</span><span class="p">)</span>
<span class="n">Atlanta</span><span class="p">,</span> <span class="n">Georgia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">84.42</span><span class="p">,</span> <span class="mf">33.76</span><span class="p">)</span>
<span class="n">Indianapolis</span><span class="p">,</span> <span class="n">Indiana</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">86.15</span><span class="p">,</span> <span class="mf">39.78</span><span class="p">)</span>
<span class="n">Helena</span><span class="p">,</span> <span class="n">Montana</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">112.0</span><span class="p">,</span> <span class="mf">46.6</span><span class="p">)</span>
<span class="n">Columbus</span><span class="p">,</span> <span class="n">Ohio</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">82.99</span><span class="p">,</span> <span class="mf">39.98</span><span class="p">)</span>
<span class="n">Richmond</span><span class="p">,</span> <span class="n">Virginia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">77.48</span><span class="p">,</span> <span class="mf">37.53</span><span class="p">)</span>
<span class="n">Topeka</span><span class="p">,</span> <span class="n">Kansas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">95.69</span><span class="p">,</span> <span class="mf">39.04</span><span class="p">)</span>
<span class="n">Boston</span><span class="p">,</span> <span class="n">Massachusetts</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">71.02</span><span class="p">,</span> <span class="mf">42.33</span><span class="p">)</span>
<span class="n">Lincoln</span><span class="p">,</span> <span class="n">Nebraska</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">96.68</span><span class="p">,</span> <span class="mf">40.81</span><span class="p">)</span>
<span class="n">Oklahoma</span> <span class="n">City</span><span class="p">,</span> <span class="n">Oklahoma</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">97.51</span><span class="p">,</span> <span class="mf">35.47</span><span class="p">)</span>
<span class="n">Juneau</span><span class="p">,</span> <span class="n">Alaska</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">134.2</span><span class="p">,</span> <span class="mf">58.37</span><span class="p">)</span>
<span class="n">Pierre</span><span class="p">,</span> <span class="n">South</span> <span class="n">Dakota</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.3</span><span class="p">,</span> <span class="mf">44.38</span><span class="p">)</span>
<span class="n">Honolulu</span><span class="p">,</span> <span class="n">Hawaii</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">157.8</span><span class="p">,</span> <span class="mf">21.31</span><span class="p">)</span>
<span class="n">Montgomery</span><span class="p">,</span> <span class="n">Alabama</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">86.27</span><span class="p">,</span> <span class="mf">32.35</span><span class="p">)</span>
<span class="n">Little</span> <span class="n">Rock</span><span class="p">,</span> <span class="n">Arkansas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">92.36</span><span class="p">,</span> <span class="mf">34.73</span><span class="p">)</span>
<span class="n">Denver</span><span class="p">,</span> <span class="n">Colorado</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">104.9</span><span class="p">,</span> <span class="mf">39.76</span><span class="p">)</span>
<span class="n">Hartford</span><span class="p">,</span> <span class="n">Connecticut</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">72.68</span><span class="p">,</span> <span class="mf">41.77</span><span class="p">)</span>
<span class="n">Dover</span><span class="p">,</span> <span class="n">Delaware</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">75.52</span><span class="p">,</span> <span class="mf">39.16</span><span class="p">)</span>
<span class="n">Washington</span><span class="p">,</span> <span class="n">District</span> <span class="n">of</span> <span class="n">Columbia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">77.02</span><span class="p">,</span> <span class="mf">38.9</span><span class="p">)</span>
<span class="n">Tallahassee</span><span class="p">,</span> <span class="n">Florida</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">84.25</span><span class="p">,</span> <span class="mf">30.46</span><span class="p">)</span>
<span class="n">Boise</span><span class="p">,</span> <span class="n">Idaho</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">116.2</span><span class="p">,</span> <span class="mf">43.6</span><span class="p">)</span>
<span class="n">Springfield</span><span class="p">,</span> <span class="n">Illinois</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">89.67</span><span class="p">,</span> <span class="mf">39.76</span><span class="p">)</span>
<span class="n">Des</span> <span class="n">Moines</span><span class="p">,</span> <span class="n">Iowa</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">93.62</span><span class="p">,</span> <span class="mf">41.57</span><span class="p">)</span>
<span class="n">Frankfort</span><span class="p">,</span> <span class="n">Kentucky</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">84.87</span><span class="p">,</span> <span class="mf">38.19</span><span class="p">)</span>
<span class="n">Baton</span> <span class="n">Rouge</span><span class="p">,</span> <span class="n">Louisiana</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">91.13</span><span class="p">,</span> <span class="mf">30.45</span><span class="p">)</span>
<span class="n">Augusta</span><span class="p">,</span> <span class="n">Maine</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">69.73</span><span class="p">,</span> <span class="mf">44.33</span><span class="p">)</span>
<span class="n">Annapolis</span><span class="p">,</span> <span class="n">Maryland</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">76.51</span><span class="p">,</span> <span class="mf">38.97</span><span class="p">)</span>
<span class="n">Lansing</span><span class="p">,</span> <span class="n">Michigan</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">84.56</span><span class="p">,</span> <span class="mf">42.71</span><span class="p">)</span>
<span class="n">Saint</span> <span class="n">Paul</span><span class="p">,</span> <span class="n">Minnesota</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">93.1</span><span class="p">,</span> <span class="mf">44.95</span><span class="p">)</span>
<span class="n">Jackson</span><span class="p">,</span> <span class="n">Mississippi</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">90.21</span><span class="p">,</span> <span class="mf">32.32</span><span class="p">)</span>
<span class="n">Jefferson</span> <span class="n">City</span><span class="p">,</span> <span class="n">Missouri</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">92.18</span><span class="p">,</span> <span class="mf">38.57</span><span class="p">)</span>
<span class="n">Carson</span> <span class="n">City</span><span class="p">,</span> <span class="n">Nevada</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">119.7</span><span class="p">,</span> <span class="mf">39.15</span><span class="p">)</span>
<span class="n">Concord</span><span class="p">,</span> <span class="n">New</span> <span class="n">Hampshire</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">71.56</span><span class="p">,</span> <span class="mf">43.23</span><span class="p">)</span>
<span class="n">Trenton</span><span class="p">,</span> <span class="n">New</span> <span class="n">Jersey</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">74.76</span><span class="p">,</span> <span class="mf">40.22</span><span class="p">)</span>
<span class="n">Santa</span> <span class="n">Fe</span><span class="p">,</span> <span class="n">New</span> <span class="n">Mexico</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">106.0</span><span class="p">,</span> <span class="mf">35.67</span><span class="p">)</span>
<span class="n">Albany</span><span class="p">,</span> <span class="n">New</span> <span class="n">York</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">73.8</span><span class="p">,</span> <span class="mf">42.67</span><span class="p">)</span>
<span class="n">Raleigh</span><span class="p">,</span> <span class="n">North</span> <span class="n">Carolina</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">78.64</span><span class="p">,</span> <span class="mf">35.83</span><span class="p">)</span>
<span class="n">Bismarck</span><span class="p">,</span> <span class="n">North</span> <span class="n">Dakota</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">100.8</span><span class="p">,</span> <span class="mf">46.81</span><span class="p">)</span>
<span class="n">Salem</span><span class="p">,</span> <span class="n">Oregon</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">123.0</span><span class="p">,</span> <span class="mf">44.92</span><span class="p">)</span>
<span class="n">Harrisburg</span><span class="p">,</span> <span class="n">Pennsylvania</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">76.89</span><span class="p">,</span> <span class="mf">40.28</span><span class="p">)</span>
<span class="n">Providence</span><span class="p">,</span> <span class="n">Rhode</span> <span class="n">Island</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">71.42</span><span class="p">,</span> <span class="mf">41.82</span><span class="p">)</span>
<span class="n">Columbia</span><span class="p">,</span> <span class="n">South</span> <span class="n">Carolina</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">81.01</span><span class="p">,</span> <span class="mf">34.02</span><span class="p">)</span>
<span class="n">Nashville</span><span class="p">,</span> <span class="n">Tennessee</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">86.78</span><span class="p">,</span> <span class="mf">36.17</span><span class="p">)</span>
<span class="n">Austin</span><span class="p">,</span> <span class="n">Texas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">97.76</span><span class="p">,</span> <span class="mf">30.31</span><span class="p">)</span>
<span class="n">Salt</span> <span class="n">Lake</span> <span class="n">City</span><span class="p">,</span> <span class="n">Utah</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">111.9</span><span class="p">,</span> <span class="mf">40.78</span><span class="p">)</span>
<span class="n">Montpelier</span><span class="p">,</span> <span class="n">Vermont</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">72.57</span><span class="p">,</span> <span class="mf">44.27</span><span class="p">)</span>
<span class="n">Olympia</span><span class="p">,</span> <span class="n">Washington</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">122.9</span><span class="p">,</span> <span class="mf">47.04</span><span class="p">)</span>
<span class="n">Charleston</span><span class="p">,</span> <span class="n">West</span> <span class="n">Virginia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">81.63</span><span class="p">,</span> <span class="mf">38.35</span><span class="p">)</span>
<span class="n">Madison</span><span class="p">,</span> <span class="n">Wisconsin</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">89.43</span><span class="p">,</span> <span class="mf">43.09</span><span class="p">)</span>
<span class="n">Cheyenne</span><span class="p">,</span> <span class="n">Wyoming</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span> <span class="p">(</span><span class="o">-</span><span class="mf">104.8</span><span class="p">,</span> <span class="mf">41.15</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Filter those within 2000 km of Mexico City</span>
<span class="n">nearby</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">pt</span><span class="p">:</span> <span class="n">pt</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">mexico_city</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2000</span><span class="n">e3</span><span class="p">,</span> <span class="n">us_capitols</span><span class="p">))</span>
<span class="k">for</span> <span class="n">capitol</span> <span class="ow">in</span> <span class="n">nearby</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">capitol</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Oklahoma</span> <span class="n">City</span><span class="p">,</span> <span class="n">Oklahoma</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">Montgomery</span><span class="p">,</span> <span class="n">Alabama</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">Little</span> <span class="n">Rock</span><span class="p">,</span> <span class="n">Arkansas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">Tallahassee</span><span class="p">,</span> <span class="n">Florida</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">Baton</span> <span class="n">Rouge</span><span class="p">,</span> <span class="n">Louisiana</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">Jackson</span><span class="p">,</span> <span class="n">Mississippi</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">Santa</span> <span class="n">Fe</span><span class="p">,</span> <span class="n">New</span> <span class="n">Mexico</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="n">Austin</span><span class="p">,</span> <span class="n">Texas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Or, list capitols from nearest to furthest from Mexico City</span>
<span class="n">distances</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">pt</span><span class="p">:</span> <span class="n">mexico_city</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">pt</span><span class="p">),</span> <span class="n">us_capitols</span><span class="p">)</span>
<span class="n">distances_capitols</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">distances</span><span class="p">,</span> <span class="n">us_capitols</span><span class="p">))</span>
<span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">distances_capitols</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{km:.0f}</span><span class="s2"> km, </span><span class="si">{name}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">km</span><span class="o">=</span><span class="n">d</span><span class="o">/</span><span class="mi">1</span><span class="n">e3</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">pt</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1213</span> <span class="n">km</span><span class="p">,</span> <span class="n">Austin</span><span class="p">,</span> <span class="n">Texas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">1463</span> <span class="n">km</span><span class="p">,</span> <span class="n">Baton</span> <span class="n">Rouge</span><span class="p">,</span> <span class="n">Louisiana</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">1683</span> <span class="n">km</span><span class="p">,</span> <span class="n">Jackson</span><span class="p">,</span> <span class="n">Mississippi</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">1785</span> <span class="n">km</span><span class="p">,</span> <span class="n">Oklahoma</span> <span class="n">City</span><span class="p">,</span> <span class="n">Oklahoma</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">1822</span> <span class="n">km</span><span class="p">,</span> <span class="n">Little</span> <span class="n">Rock</span><span class="p">,</span> <span class="n">Arkansas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">1922</span> <span class="n">km</span><span class="p">,</span> <span class="n">Santa</span> <span class="n">Fe</span><span class="p">,</span> <span class="n">New</span> <span class="n">Mexico</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">1923</span> <span class="n">km</span><span class="p">,</span> <span class="n">Montgomery</span><span class="p">,</span> <span class="n">Alabama</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">1933</span> <span class="n">km</span><span class="p">,</span> <span class="n">Tallahassee</span><span class="p">,</span> <span class="n">Florida</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2027</span> <span class="n">km</span><span class="p">,</span> <span class="n">Phoenix</span><span class="p">,</span> <span class="n">Arizona</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2155</span> <span class="n">km</span><span class="p">,</span> <span class="n">Atlanta</span><span class="p">,</span> <span class="n">Georgia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2199</span> <span class="n">km</span><span class="p">,</span> <span class="n">Topeka</span><span class="p">,</span> <span class="n">Kansas</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2214</span> <span class="n">km</span><span class="p">,</span> <span class="n">Nashville</span><span class="p">,</span> <span class="n">Tennessee</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2225</span> <span class="n">km</span><span class="p">,</span> <span class="n">Jefferson</span> <span class="n">City</span><span class="p">,</span> <span class="n">Missouri</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2320</span> <span class="n">km</span><span class="p">,</span> <span class="n">Denver</span><span class="p">,</span> <span class="n">Colorado</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2382</span> <span class="n">km</span><span class="p">,</span> <span class="n">Lincoln</span><span class="p">,</span> <span class="n">Nebraska</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2414</span> <span class="n">km</span><span class="p">,</span> <span class="n">Columbia</span><span class="p">,</span> <span class="n">South</span> <span class="n">Carolina</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2429</span> <span class="n">km</span><span class="p">,</span> <span class="n">Springfield</span><span class="p">,</span> <span class="n">Illinois</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2467</span> <span class="n">km</span><span class="p">,</span> <span class="n">Cheyenne</span><span class="p">,</span> <span class="n">Wyoming</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2495</span> <span class="n">km</span><span class="p">,</span> <span class="n">Frankfort</span><span class="p">,</span> <span class="n">Kentucky</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2510</span> <span class="n">km</span><span class="p">,</span> <span class="n">Des</span> <span class="n">Moines</span><span class="p">,</span> <span class="n">Iowa</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2576</span> <span class="n">km</span><span class="p">,</span> <span class="n">Indianapolis</span><span class="p">,</span> <span class="n">Indiana</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2661</span> <span class="n">km</span><span class="p">,</span> <span class="n">Salt</span> <span class="n">Lake</span> <span class="n">City</span><span class="p">,</span> <span class="n">Utah</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2694</span> <span class="n">km</span><span class="p">,</span> <span class="n">Charleston</span><span class="p">,</span> <span class="n">West</span> <span class="n">Virginia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2708</span> <span class="n">km</span><span class="p">,</span> <span class="n">Raleigh</span><span class="p">,</span> <span class="n">North</span> <span class="n">Carolina</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2752</span> <span class="n">km</span><span class="p">,</span> <span class="n">Columbus</span><span class="p">,</span> <span class="n">Ohio</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2769</span> <span class="n">km</span><span class="p">,</span> <span class="n">Pierre</span><span class="p">,</span> <span class="n">South</span> <span class="n">Dakota</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2777</span> <span class="n">km</span><span class="p">,</span> <span class="n">Madison</span><span class="p">,</span> <span class="n">Wisconsin</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2885</span> <span class="n">km</span><span class="p">,</span> <span class="n">Saint</span> <span class="n">Paul</span><span class="p">,</span> <span class="n">Minnesota</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2904</span> <span class="n">km</span><span class="p">,</span> <span class="n">Richmond</span><span class="p">,</span> <span class="n">Virginia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2922</span> <span class="n">km</span><span class="p">,</span> <span class="n">Lansing</span><span class="p">,</span> <span class="n">Michigan</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">2947</span> <span class="n">km</span><span class="p">,</span> <span class="n">Carson</span> <span class="n">City</span><span class="p">,</span> <span class="n">Nevada</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3025</span> <span class="n">km</span><span class="p">,</span> <span class="n">Sacramento</span><span class="p">,</span> <span class="n">California</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3030</span> <span class="n">km</span><span class="p">,</span> <span class="n">Washington</span><span class="p">,</span> <span class="n">District</span> <span class="n">of</span> <span class="n">Columbia</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3041</span> <span class="n">km</span><span class="p">,</span> <span class="n">Bismarck</span><span class="p">,</span> <span class="n">North</span> <span class="n">Dakota</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3070</span> <span class="n">km</span><span class="p">,</span> <span class="n">Annapolis</span><span class="p">,</span> <span class="n">Maryland</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3118</span> <span class="n">km</span><span class="p">,</span> <span class="n">Boise</span><span class="p">,</span> <span class="n">Idaho</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3137</span> <span class="n">km</span><span class="p">,</span> <span class="n">Harrisburg</span><span class="p">,</span> <span class="n">Pennsylvania</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3150</span> <span class="n">km</span><span class="p">,</span> <span class="n">Dover</span><span class="p">,</span> <span class="n">Delaware</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3235</span> <span class="n">km</span><span class="p">,</span> <span class="n">Helena</span><span class="p">,</span> <span class="n">Montana</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3274</span> <span class="n">km</span><span class="p">,</span> <span class="n">Trenton</span><span class="p">,</span> <span class="n">New</span> <span class="n">Jersey</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3506</span> <span class="n">km</span><span class="p">,</span> <span class="n">Albany</span><span class="p">,</span> <span class="n">New</span> <span class="n">York</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3517</span> <span class="n">km</span><span class="p">,</span> <span class="n">Hartford</span><span class="p">,</span> <span class="n">Connecticut</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3585</span> <span class="n">km</span><span class="p">,</span> <span class="n">Salem</span><span class="p">,</span> <span class="n">Oregon</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3605</span> <span class="n">km</span><span class="p">,</span> <span class="n">Providence</span><span class="p">,</span> <span class="n">Rhode</span> <span class="n">Island</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3665</span> <span class="n">km</span><span class="p">,</span> <span class="n">Boston</span><span class="p">,</span> <span class="n">Massachusetts</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3688</span> <span class="n">km</span><span class="p">,</span> <span class="n">Concord</span><span class="p">,</span> <span class="n">New</span> <span class="n">Hampshire</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3696</span> <span class="n">km</span><span class="p">,</span> <span class="n">Montpelier</span><span class="p">,</span> <span class="n">Vermont</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3748</span> <span class="n">km</span><span class="p">,</span> <span class="n">Olympia</span><span class="p">,</span> <span class="n">Washington</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">3879</span> <span class="n">km</span><span class="p">,</span> <span class="n">Augusta</span><span class="p">,</span> <span class="n">Maine</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">5172</span> <span class="n">km</span><span class="p">,</span> <span class="n">Juneau</span><span class="p">,</span> <span class="n">Alaska</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
<span class="mi">6093</span> <span class="n">km</span><span class="p">,</span> <span class="n">Honolulu</span><span class="p">,</span> <span class="n">Hawaii</span><span class="p">,</span> <span class="n">United</span> <span class="n">States</span>
</pre></div>
</div>
<p>All of the above calculations are performed on a geoid. The
<code class="docutils literal"><span class="pre">LonLatWGS84</span></code> coordinate system means to use geographical (longitude
and latitude) coordinates on the WGS 84 ellipsoid.</p>
<p><strong>TODO: describe other geometries</strong></p>
</div>
<div class="section" id="associated-data">
<h1>Associated data<a class="headerlink" href="#associated-data" title="Permalink to this headline">¶</a></h1>
<p>By using the <code class="docutils literal"><span class="pre">data</span></code> keyword argument, additional data can be
associated with a vector geometry.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">mp</span> <span class="o">=</span> <span class="n">Multipoint</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;species&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;T. officianale&quot;</span><span class="p">,</span> <span class="s2">&quot;C. tectorum&quot;</span><span class="p">,</span>
                                  <span class="s2">&quot;M. alba&quot;</span><span class="p">,</span> <span class="s2">&quot;V. cracca&quot;</span><span class="p">]})</span>
</pre></div>
</div>
<p>The data can be a list or a dictionary of lists, and are propogated
through subsequent operations.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">pt</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Point</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;species&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;M. alba&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Metadata at the geometry level rather than the point level can be
provided using the <code class="docutils literal"><span class="pre">properties</span></code> keyword argument, which accepts a
dictionary. Derived geometries carry the properties of their parent
geometry.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mf">25.41</span><span class="p">,</span> <span class="mf">67.03</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">24.83</span><span class="p">,</span> <span class="mf">62.92</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">12.76</span><span class="p">,</span> <span class="mf">63.15</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">11.44</span><span class="p">,</span> <span class="mf">66.82</span><span class="p">)],</span>
               <span class="n">properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;geology&quot;</span><span class="p">:</span> <span class="s2">&quot;volcanic&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;alcohol&quot;</span><span class="p">:</span> <span class="s2">&quot;brennivin&quot;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;class &#39;karta.vector.geometry.Line&#39;([(-25.41, 67.03), (-24.83, 62.92), (-12.76, 63.15)])&gt;
</pre></div>
</div>
</div>
<div class="section" id="visualizing-and-importing-exporting-data">
<h1>Visualizing and importing/exporting data<a class="headerlink" href="#visualizing-and-importing-exporting-data" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal"><span class="pre">get_coordinate_lists</span></code> method and <code class="docutils literal"><span class="pre">coordinates</span></code> attribute
provide lists of coordinates, which make it easy to visualize a
geometry. Higher-level plotting operations are provided by the separate
<a class="reference external" href="https://github.com/fortyninemaps/karta-map">karta.mapping</a>
submodule, not described here.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="n">matplotlib</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">line</span><span class="o">.</span><span class="n">coordinates</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Using</span> <span class="n">matplotlib</span> <span class="n">backend</span><span class="p">:</span> <span class="n">Qt4Agg</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">&lt;</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span> <span class="n">at</span> <span class="mh">0x7f25d4d25630</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>Data can be read from several common formats, including ESRI shapefiles
(through bindings to the <em>pyshp</em> module), GeoJSON, GPX, and comma
separated value tables. Convenience functions are kept in the
<code class="docutils literal"><span class="pre">karta.vector.read</span></code> namespace.</p>
<p>Each geometry has appropriate methods to save data:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">line</span><span class="o">.</span><span class="n">to_shapefile</span><span class="p">(</span><span class="s2">&quot;my_shapefile&quot;</span><span class="p">)</span>
<span class="n">poly</span><span class="o">.</span><span class="n">to_geojson</span><span class="p">(</span><span class="s2">&quot;my_json.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">karta</span><span class="o">.</span><span class="n">vector</span><span class="o">.</span><span class="n">geojson</span><span class="o">.</span><span class="n">GeoJSONWriter</span> <span class="n">at</span> <span class="mh">0x7f25d4cd0da0</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="raster-data">
<h1>Raster data<a class="headerlink" href="#raster-data" title="Permalink to this headline">¶</a></h1>
<p>Raster data are primarily represented by the <code class="docutils literal"><span class="pre">karta.RegularGrid</span></code>
class. <code class="docutils literal"><span class="pre">RegularGrid</span></code> instances have a CRS, a Null-data value, a
geotransform, and one or more <em>bands</em>, which containing the actual data.</p>
<div class="section" id="bands">
<h2>Bands<a class="headerlink" href="#bands" title="Permalink to this headline">¶</a></h2>
<p>To provide flexibility, different band instances are provided by
<code class="docutils literal"><span class="pre">karta.raster.bands</span></code> using different strategies for data storage.</p>
<ul>
<li><p class="first">The simplest case, <code class="docutils literal"><span class="pre">SimpleBand</span></code>, uses a numpy array to store all
data. This makes it reasonably fast, but can use a lot of memory when
opening multiple large rasters.</p>
</li>
<li><p class="first">The default case, <code class="docutils literal"><span class="pre">CompressedBand</span></code>, uses chunking and blosc
compression to reduce the memory footprint of the raster data, at a
small speed cost.</p>
</li>
<li><p class="first">Finally, <code class="docutils literal"><span class="pre">GdalFileBand</span></code> reads data directly from a valid GDAL
datasource, using the least memory but performing the slowest.</p>
<blockquote>
<div><p>Note: <code class="docutils literal"><span class="pre">GdalFileBand</span></code> doesn&#8217;t currently handle all raster
operations supported by the other band types.</p>
</div></blockquote>
</li>
</ul>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">karta.raster</span> <span class="k">import</span> <span class="n">RegularGrid</span><span class="p">,</span> <span class="n">SimpleBand</span><span class="p">,</span> <span class="n">CompressedBand</span><span class="p">,</span> <span class="n">read_gtiff</span>

<span class="n">ls8</span> <span class="o">=</span> <span class="n">read_gtiff</span><span class="p">(</span><span class="s2">&quot;LC80080032016087LGN00_B2.TIF&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ls8</span><span class="o">.</span><span class="n">bands</span><span class="p">)</span>     <span class="c1"># list of one CompressedBand instance</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">&lt;</span><span class="n">karta</span><span class="o">.</span><span class="n">raster</span><span class="o">.</span><span class="n">band</span><span class="o">.</span><span class="n">CompressedBand</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7f25d4ccdac8</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Print grid dimensions</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ls8</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">9141</span><span class="p">,</span> <span class="mi">9151</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Print grid extent</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ls8</span><span class="o">.</span><span class="n">extent</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mf">354000.0</span><span class="p">,</span> <span class="mf">628500.0</span><span class="p">,</span> <span class="mf">8648400.0</span><span class="p">,</span> <span class="mf">8922600.0</span><span class="p">)</span>
</pre></div>
</div>
<p>When opening or creating a <code class="docutils literal"><span class="pre">RegularGrid</span></code>, a non-default band type can
be specified as a keyword argument.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Specify the band backend and verify that the data are the same</span>
<span class="n">ls8_numpy</span> <span class="o">=</span> <span class="n">read_gtiff</span><span class="p">(</span><span class="s2">&quot;LC80080032016087LGN00_B2.TIF&quot;</span><span class="p">,</span> <span class="n">bandclass</span><span class="o">=</span><span class="n">SimpleBand</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">ls8</span><span class="p">[:,:]</span> <span class="o">==</span> <span class="n">ls8_numpy</span><span class="p">[:,:])</span>    <span class="c1"># True</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kc">True</span>
</pre></div>
</div>
<p>In the above, the slice syntax <code class="docutils literal"><span class="pre">[:,:]</span></code> is used to get an array of all
grid data. Because the grid <code class="docutils literal"><span class="pre">ls8</span></code> has only a single band in this case,
the data array has two dimensions. The normal simple slicing rules
apply, i.e. one can do things like:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">subgrid</span> <span class="o">=</span> <span class="n">ls8</span><span class="p">[</span><span class="mi">2000</span><span class="p">:</span><span class="mi">3000</span><span class="p">,</span> <span class="mi">4000</span><span class="p">:</span><span class="mi">4500</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">subgrid</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">every_other</span> <span class="o">=</span> <span class="n">ls8</span><span class="p">[::</span><span class="mi">2</span><span class="p">,</span> <span class="p">::</span><span class="mi">2</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">every_other</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">4571</span><span class="p">,</span> <span class="mi">4576</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">RegularGrid</span></code> instance provides methods for sampling rasters,
computing statistics, clipping and resizing, and resampling.</p>
<p><strong>TODO: describe geotransform tuple and demstrate grid creation</strong></p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference.html" class="btn btn-neutral float-right" title="Package reference" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral" title="Installation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Nat Wilson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>